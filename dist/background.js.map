{"version":3,"file":"background.js","mappings":";;;;AAAAA,MAAM,CAACC,OAAO,CAACC,WAAW,CAACC,WAAW,CAAC,MAAM,CAE7C,CAAC,CAAC;AAEF,IAAIC,uBAAuB,GAAG,KAAK;AACnC;;AAEAJ,MAAM,CAACK,MAAM,CAACC,SAAS,CAACH,WAAW,CAAEI,GAAG,IAAK;EAC5C;EACA;EACAC,OAAO,CAACC,GAAG,CAAC,4DAA4D,EAAEL,uBAAuB,CAAC;EAClG,IAAI,CAACA,uBAAuB,EAAE;IAC7BI,OAAO,CAACC,GAAG,CAAC,aAAa,CAAC;IAC1BT,MAAM,CAACU,SAAS,CAACC,aAAa,CAAC;MAC9BC,MAAM,EAAE;QAAEC,KAAK,EAAEN,GAAG,CAACO;MAAG,CAAC;MACzBC,KAAK,EAAE,CAAC,YAAY;IACrB,CAAC,EAAGC,gBAAgB,IAAK;MACxB;MACA,IAAIhB,MAAM,CAACC,OAAO,CAACgB,SAAS,EAAE;QAC7BT,OAAO,CAACU,KAAK,CAAClB,MAAM,CAACC,OAAO,CAACgB,SAAS,CAACE,OAAO,CAAC;MAChD,CAAC,MAAM;QACNf,uBAAuB,GAAG,IAAI;MAC/B;IACD,CAAC,CAAC;EACH,CAAC,MAAM;IACN;IACAJ,MAAM,CAACU,SAAS,CAACC,aAAa,CAAC;MAC9BC,MAAM,EAAE;QAAEC,KAAK,EAAEN,GAAG,CAACO;MAAG,CAAC;MACzBM,QAAQ,EAAEC;IACX,CAAC,EAAE,MAAM;MACR,IAAIrB,MAAM,CAACC,OAAO,CAACgB,SAAS,EAAE;QAC7BT,OAAO,CAACU,KAAK,CAAClB,MAAM,CAACC,OAAO,CAACgB,SAAS,CAACE,OAAO,CAAC;MAChD,CAAC,MAAM;QACNf,uBAAuB,GAAG,KAAK;MAChC;IACD,CAAC,CAAC;EACH;AACD,CAAC,CAAC;AAEF,SAASiB,aAAaA,CAAA,EAAG;EACxB;EACA,MAAMC,eAAe,GAAGC,QAAQ,CAACC,cAAc,CAAC,oBAAoB,CAAC;EACrE,MAAMC,cAAc,GAAGF,QAAQ,CAACC,cAAc,CAAC,oBAAoB,CAAC;EACpE,IAAIF,eAAe,EAAE;IACpBA,eAAe,CAACI,MAAM,CAAC,CAAC,EAAE;EAC3B;EACA,IAAID,cAAc,EAAC;IAClBA,cAAc,CAACC,MAAM,CAAC,CAAC;EACxB;AACD;AAEA1B,MAAM,CAACC,OAAO,CAAC0B,SAAS,CAACxB,WAAW,CAAC,CAACgB,OAAO,EAAES,MAAM,EAAEC,YAAY,KAAK;EACpE;EACH,IAAIV,OAAO,CAACd,MAAM,KAAK,cAAc,EAAE;IAChCG,OAAO,CAACC,GAAG,CAAC,0BAA0B,EAAEmB,MAAM,CAACrB,GAAG,CAACO,EAAE,EAAEc,MAAM,CAAC;IAE9DxB,uBAAuB,GAAI,KAAK;IAEtCJ,MAAM,CAACU,SAAS,CAACC,aAAa,CAAC;MAC9BC,MAAM,EAAE;QAAEC,KAAK,EAAEe,MAAM,CAACrB,GAAG,EAAEO;MAAG,CAAC;MACjCM,QAAQ,EAAEC;IACX,CAAC,EAAE,MAAM;MACR,IAAIrB,MAAM,CAACC,OAAO,CAACgB,SAAS,EAAE;QAC7BT,OAAO,CAACU,KAAK,CAAClB,MAAM,CAACC,OAAO,CAACgB,SAAS,CAACE,OAAO,CAAC;MAChD,CAAC,MAAM;QACNf,uBAAuB,GAAG,KAAK;MAChC;IACD,CAAC,CAAC;EACA;AACJ,CAAC,CAAC,C","sources":["webpack://font-tester/./src/background.js"],"sourcesContent":["chrome.runtime.onInstalled.addListener(() => {\n\n})\n\nlet isContentScriptInjected = false\n// let tabId = null\n\nchrome.action.onClicked.addListener((tab) => {\n\t// alert(\"action performed\")\n\t// tabId = tab.id\n\tconsole.log('Extension icon clicked, attempting to inject content.js...', isContentScriptInjected)\n\tif (!isContentScriptInjected) {\n\t\tconsole.log(\"Running....\")\n\t\tchrome.scripting.executeScript({\n\t\t\ttarget: { tabId: tab.id },\n\t\t\tfiles: ['content.js']\n\t\t}, (injectionResults) => {\n\t\t\t// failed to inject script\n\t\t\tif (chrome.runtime.lastError) {\n\t\t\t\tconsole.error(chrome.runtime.lastError.message)\n\t\t\t} else {\n\t\t\t\tisContentScriptInjected = true\n\t\t\t}\n\t\t});\n\t} else {\n\t\t// Remove the content by re-executing the content script with a toggle function or a cleanup\n\t\tchrome.scripting.executeScript({\n\t\t\ttarget: { tabId: tab.id },\n\t\t\tfunction: removeContent\n\t\t}, () => {\n\t\t\tif (chrome.runtime.lastError) {\n\t\t\t\tconsole.error(chrome.runtime.lastError.message)\n\t\t\t} else {\n\t\t\t\tisContentScriptInjected = false\n\t\t\t}\n\t\t})\n\t}\n})\n\nfunction removeContent() {\n\t// Don't call this function directly from background.js instead call via, chrome.scripting.executeScript\n\tconst injectedElement = document.getElementById('font-selector-root')\n\tconst injectedScript = document.getElementById('font-tester-script')\n\tif (injectedElement) {\n\t\tinjectedElement.remove()  // Remove the element if it exists\n\t}\n\tif (injectedScript){\n\t\tinjectedScript.remove()\n\t}\n}\n\nchrome.runtime.onMessage.addListener((message, sender, sendResponse) => {\n    // if widget closed from content.js file, by clicking on the close button\n\tif (message.action === 'widgetClosed') {\n        console.log(\"closed from content.js: \", sender.tab.id, sender)\n\n        isContentScriptInjected  = false\n\t\t\n\t\tchrome.scripting.executeScript({\n\t\t\ttarget: { tabId: sender.tab?.id },\n\t\t\tfunction: removeContent\n\t\t}, () => {\n\t\t\tif (chrome.runtime.lastError) {\n\t\t\t\tconsole.error(chrome.runtime.lastError.message)\n\t\t\t} else {\n\t\t\t\tisContentScriptInjected = false\n\t\t\t}\n\t\t})\n    }\n})"],"names":["chrome","runtime","onInstalled","addListener","isContentScriptInjected","action","onClicked","tab","console","log","scripting","executeScript","target","tabId","id","files","injectionResults","lastError","error","message","function","removeContent","injectedElement","document","getElementById","injectedScript","remove","onMessage","sender","sendResponse"],"sourceRoot":""}